# Module 5 Lecture: Actuators and Control Systems in Arduino ü§ñ‚öôÔ∏è
ü§ñ **Instructor:** Md. Hassanul Karim Roni, Assistant Professor, EEE, HSTU, Dinajpur, BD

## üöÄ Projects You'll Build Today
- **Servo-Based Robotic Arm:** Create a mini robotic arm that moves with precision using a servo motor and a potentiometer!  
- **Simple Line-Following Robot:** Build a robot that follows a black line using IR sensors‚Äîperfect for robotics enthusiasts!  
- **Bonus Challenge:** Add feedback to make your robot smarter or control the arm with multiple angles. Curious? Let‚Äôs get moving!  

---

## üéØ Lecture Objectives
- Understand how to control actuators: DC motors, servos, steppers, and relays.  
- Use Pulse Width Modulation (PWM) for precise speed and position control.  
- Implement feedback loops for smarter systems (e.g., using encoders).  
- Integrate actuators with sensors for responsive projects.  
- Build a servo-based robotic arm or line-following robot to apply your skills.  

**Duration:** ~3 hours (1.5 hours lecture + 1.5 hours lab, split over Weeks 5-6).  
**Tools Needed:** Arduino Uno, USB cable, SG90 servo motor, 28BYJ-48 stepper motor with ULN2003 driver, DC motor with L298N driver, 5V relay module, IR sensor module (e.g., TCRT5000), potentiometer (10kŒ©), 220Œ© resistors, breadboard, jumper wires, 9V battery (or external 5-12V supply), laptop with Arduino IDE, optional: Tinkercad Circuits.  

---

## üõ†Ô∏è Why Actuators and Control Systems Matter
Actuators are the muscles of your Arduino projects‚Äîthey make things move, switch, or act based on your code. From spinning motors to flipping relays, actuators bring your projects to life. Combined with sensors and feedback, they create **control systems** that react intelligently to the environment, like robots navigating paths or arms grabbing objects. Let‚Äôs power up and take control! üí™

---

## üìö Actuators and Control Systems Concepts

### 1Ô∏è‚É£ Controlling Motors
Arduino controls three main motor types, each with unique characteristics:

#### DC Motors with L298N Driver
- **Purpose:** Spin continuously for wheels, fans, or pumps.  
- **Control:** L298N driver handles high current; uses PWM for speed.  
- **Pins:** Enable (PWM for speed), IN1/IN2 for direction.  
- **Example:**
  ```c
  const int enA = 9; // PWM
  const int in1 = 7;
  const int in2 = 6;
  void setup() {
    pinMode(enA, OUTPUT);
    pinMode(in1, OUTPUT);
    pinMode(in2, OUTPUT);
  }
  void loop() {
    digitalWrite(in1, HIGH); // Forward
    digitalWrite(in2, LOW);
    analogWrite(enA, 128); // Half speed
  }
  ```
- **Diagram Description:** L298N inputs to Arduino pins 6, 7, 9; motor to L298N outputs; 12V supply to L298N.

#### Servo Motors (Servo.h)
- **Purpose:** Precise angular control (0-180¬∞) for robotic arms, steering.  
- **Control:** PWM signal via `Servo.h` library.  
- **Example:**
  ```c
  #include <Servo.h>
  Servo myServo;
  void setup() {
    myServo.attach(9); // PWM pin
  }
  void loop() {
    myServo.write(90); // Move to 90¬∞
    delay(1000);
  }
  ```
- **Diagram Description:** Servo signal pin to Arduino pin 9, VCC to 5V, GND to GND.

#### Stepper Motors (Stepper.h)
- **Purpose:** Precise step-based rotation for 3D printers, CNC.  
- **Control:** ULN2003 driver with `Stepper.h` library.  
- **Example:**
  ```c
  #include <Stepper.h>
  const int stepsPerRev = 2048;
  Stepper myStepper(stepsPerRev, 8, 9, 10, 11);
  void setup() {
    myStepper.setSpeed(15); // RPM
  }
  void loop() {
    myStepper.step(stepsPerRev); // One revolution
    delay(1000);
  }
  ```
- **Diagram Description:** ULN2003 pins to Arduino 8-11, stepper motor to ULN2003, external 5V supply.

**Technical Notes:**
- **Power:** DC/stepper motors need external power (5-12V) as Arduino‚Äôs 5V can‚Äôt handle high current.  
- **L298N Dropout:** ~2V voltage loss; ensure sufficient supply voltage.  
- **Servo Limits:** SG90 uses ~500mA at stall; power externally for multiple servos.

---

### 2Ô∏è‚É£ Relays for High-Power Devices
Relays switch high-power devices (e.g., 220V AC appliances) using low-power Arduino signals.  
- **Function:** `digitalWrite(pin, HIGH/LOW)` to control.  
- **Types:** 5V single-channel relay (active LOW or HIGH).  
- **Example:**
  ```c
  const int relayPin = 7;
  void setup() {
    pinMode(relayPin, OUTPUT);
  }
  void loop() {
    digitalWrite(relayPin, HIGH); // Turn on
    delay(2000);
    digitalWrite(relayPin, LOW); // Turn off
    delay(2000);
  }
  ```
- **Diagram Description:** Relay signal to pin 7, VCC to 5V, GND to GND, load (e.g., lamp) to NO/NC terminals.

**Safety Note:** Relays handle high voltage‚Äîuse insulated wiring and test with low-power loads (e.g., LED strip) first.

---

### 3Ô∏è‚É£ PWM for Speed/Position Control
PWM (Pulse Width Modulation) simulates analog output for motor speed or servo position.  
- **Function:** `analogWrite(pin, value)` (0-255, 0-100% duty cycle).  
- **Pins (Uno):** 3, 5, 6, 9, 10, 11 (~490Hz).  
- **Use Case:** Control DC motor speed or servo angle.  
- **Example:** See DC motor and servo code above.  

**Technical Note:** PWM frequency can be adjusted via timers (advanced topic). Higher frequencies reduce motor noise.

---

### 4Ô∏è‚É£ Feedback Loops (e.g., Encoders)
Feedback makes systems smarter by adjusting outputs based on inputs.  
- **Encoders:** Measure motor rotation (e.g., for precise wheel movement).  
- **Example Setup:** Optical encoder with A/B channels to digital pins.  
- **Code Snippet:**
  ```c
  volatile int encoderPos = 0;
  void setup() {
    pinMode(2, INPUT); // Encoder A
    attachInterrupt(digitalPinToInterrupt(2), updateEncoder, RISING);
  }
  void loop() {
    // Use encoderPos for control
  }
  void updateEncoder() {
    encoderPos++; // Increment on pulse
  }
  ```
- **Use Case:** Adjust motor speed to maintain position or follow a path.  

**Arduino Tip:** Combine sensor data (e.g., IR sensor) with actuator control for closed-loop systems.

---

## üñåÔ∏è Lab: Hands-On Projects
Let‚Äôs put actuators to work with two projects: a **servo-based robotic arm** and a **line-following robot**. Choose one (or try both in Tinkercad)!  

### Project 1: Servo-Based Robotic Arm ü§ñ
**Goal:** Control a servo motor‚Äôs angle with a potentiometer for a mini robotic arm.  
**Components:** Arduino Uno, SG90 servo motor, 10kŒ© potentiometer, breadboard, jumper wires, USB cable.  
**Circuit Setup:**  
- Servo: Signal to pin 9 (PWM), VCC to 5V, GND to GND.  
- Potentiometer: Middle pin to A0, outer pins to 5V and GND.  
**Circuit Diagram Description:** Potentiometer wiper to A0; servo signal to pin 9, power to 5V/GND.  
**Code Outline:**  
- Use `Servo.h` library.  
- Read potentiometer with `analogRead()`.  
- Map value (0-1023) to servo angle (0-180) using `map()`.  
- Set angle with `myServo.write()`.  

**Safety Note:** Ensure servo power is stable; external 5V supply for multiple servos.

---

### Project 2: Simple Line-Following Robot üöó
**Goal:** Build a robot that follows a black line using IR sensors and DC motors.  
**Components:** Arduino Uno, IR sensor modules (2x TCRT5000), L298N motor driver, DC motors (2), chassis, wheels, 9V battery, breadboard, jumper wires.  
**Circuit Setup:**  
- IR sensors: Left to A0, right to A1, VCC to 5V, GND to GND.  
- L298N: IN1/IN2 to pins 6/7 (left motor), IN3/IN4 to 8/9 (right), ENA/ENB to PWM 5/10.  
- Motors: Connected to L298N outputs, battery to L298N power.  
**Circuit Diagram Description:** IR sensors to A0/A1; L298N controls motors via pins 5-10; battery powers L298N.  
**Code Outline:**  
- Read IR sensors (`analogRead()`).  
- If left sensor detects black, turn right motor faster (PWM).  
- Use `digitalWrite()` for direction, `analogWrite()` for speed.  

**Safety Note:** Secure battery connections; test motors at low speed first.  

**Tinkercad Alternative:** Simulate servo arm or use LEDs to mimic motor behavior.

**Challenge:** Add a third IR sensor for better line tracking or make the servo arm follow two potentiometers.

---

## üîç Key Concepts Recap
| Concept            | Description                              | Arduino Example                     |
|--------------------|------------------------------------------|-------------------------------------|
| **DC Motors**      | Continuous rotation, speed control       | `analogWrite(enA, 128)`            |
| **Servo Motors**   | Precise angular control                  | `myServo.write(90)`                |
| **Stepper Motors** | Step-based rotation                     | `myStepper.step(2048)`             |
| **Relays**         | High-power switching                    | `digitalWrite(relayPin, HIGH)`     |
| **Feedback Loops** | Adjust outputs based on inputs          | Encoder with `attachInterrupt()`   |

**Technical Notes:**  
- **Power Limits:** Uno‚Äôs 5V pin provides ~500mA; use external supply for motors/relays.  
- **PWM Pins:** Only 3, 5, 6, 9, 10, 11 on Uno support `analogWrite()`.  
- **Encoder Interrupts:** Use pins 2/3 for stable interrupt handling.  

---

## üéØ Summary & Takeaways
- **Actuators Bring Motion:** DC motors, servos, steppers, and relays make things move or switch.  
- **PWM is Power:** Control speed and position with precision.  
- **Feedback is Smart:** Encoders and sensors create responsive systems.  
- **Hands-On Wins:** Robotic arm and line-following robot show actuators in action.  
- **Next Steps:** Combine sensors (Module 4) with actuators for smarter projects.  

**Quick Tip:** Test circuits in Tinkercad to avoid wiring mistakes and blown components!  

---

## üìö Resources & Homework
- **Reference:** `https://www.arduino.cc/reference/en/` (check `Servo`, `analogWrite`, `attachInterrupt`).  
- **Library Docs:** Adafruit Servo tutorial (`https://learn.adafruit.com/adafruit-arduino-lesson-14-servo-motors`).  
- **Video Tutorial:** Search ‚ÄúArduino Line Following Robot‚Äù on YouTube.  
- **Homework:**  
  1. Build the servo-based robotic arm or line-following robot (or simulate in Tinkercad).  
  2. For the arm: Control servo with potentiometer. For the robot: Follow a simple line.  
  3. Bonus: Add a button to stop/start the robot or use two servos for multi-axis arm. Submit code/screenshots!  

**Keep Moving!** You‚Äôre now controlling physical systems. Next week, we‚Äôll explore communication and networking for IoT. Questions? Let‚Äôs brainstorm! üòÑ
